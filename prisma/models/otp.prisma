model OtpCode {
  // Core fields
  id      String     @id @default(uuid())
  user    User       @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId  String
  channel OtpChannel

  // Store only hash of OTP
  codeHash   String
  attempts   Int       @default(0)
  expiresAt  DateTime
  consumedAt DateTime?

  // Timestamps
  createdAt DateTime @default(now())

  // Indexes for efficient lookups and cleanup
  @@index([userId, expiresAt])
  @@index([expiresAt])
}
