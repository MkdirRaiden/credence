model User {
  // Core fields
  id           String   @id @default(uuid())
  email        String   @unique
  phone        String?  @unique
  passwordHash String?
  role         UserRole @default(USER)

  // Self-referral graph
  referredById String?
  referredBy   User?   @relation("Referrals", fields: [referredById], references: [id], onDelete: SetNull, onUpdate: Cascade)
  referrals    User[]  @relation("Referrals")

  // // Redemptions
  redemptionsAsReferrer ReferralRedemption[] @relation("Referrer")
  redemptionsAsReferee  ReferralRedemption[] @relation("Referee")

  // // Referral codes owned by this user
  referralCodes ReferralCode[]

  // // OTPs
  otps OtpCode[]

  // // Ledger
  credits CreditLedger[]

  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
